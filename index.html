<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FF Game Login</title>
<style>
body { font-family: Poppins,sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; background:linear-gradient(315deg,#2c5364,#203a43,#0f2027); color:white; }
.box { background: rgba(255,255,255,0.1); padding:20px; border-radius:10px; text-align:center; width:300px; }
input { width:90%; padding:8px; margin:6px 0; border:none; border-radius:6px; }
button { width:100%; padding:10px; border:none; border-radius:6px; background:#03a9f4; color:white; cursor:pointer; font-weight:bold; }
button:hover { background:#0288d1; }
</style>
</head>
<body>
<div class="box">
  <h2>üî• FF Game Login üî•</h2>
  <input type="text" id="username" placeholder="Username"><br>
  <input type="password" id="password" placeholder="Password"><br>
  <button onclick="signupUser()">Sign Up & Play</button><br><br>
  <button onclick="loginUser()">Login & Play</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-database.js";

// üî• Firebase config with databaseURL
const firebaseConfig = {
  apiKey: "AIzaSyDSeRdpupEQcEwo_q54umdAU4WHeCoPTGs",
  authDomain: "ff-game-login.firebaseapp.com",
  databaseURL: "https://ff-game-login-default-rtdb.asia-southeast1.firebasedatabase.app/",
  projectId: "ff-game-login",
  storageBucket: "ff-game-login.firebasestorage.app",
  messagingSenderId: "318341155193",
  appId: "1:318341155193:web:d56d80dd691568b2cfc7a8",
  measurementId: "G-0H5SM37VLZ"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// ‚úÖ Signup with 1000 coins + auto login
async function signupUser() {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  if(!username || !password) return alert("Enter username and password");

  await set(ref(db, "users/" + username), {
    password: password,
    joinedAt: new Date().toISOString(),
    coins: 1000
  });

  alert("üéâ Congratulations! 1000 coins credited.");
  localStorage.setItem("token", username);
  window.location.href = "dashboard.html";
}

// üîê Login
async function loginUser() {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const snapshot = await get(child(ref(db), "users/" + username));
  if(snapshot.exists()) {
    const data = snapshot.val();
    if(data.password === password) {
      localStorage.setItem("token", username);
      window.location.href = "dashboard.html";
    } else alert("‚ùå Wrong password");
  } else alert("‚ö†Ô∏è User not found");
}
</script>
</body>
</html>
